
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RbxServers - Dashboard Avanzado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animaciones globales */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.05);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        .header {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #7289da;
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.8s ease;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #7289da, #99aab5, #43b581);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: float 3s ease-in-out infinite;
        }

        .header p {
            color: #99aab5;
            font-size: 1.1rem;
        }

        /* Barra de navegaci√≥n avanzada */
        .nav-bar {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(114, 137, 218, 0.3);
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-tab {
            background: rgba(114, 137, 218, 0.1);
            border: 1px solid rgba(114, 137, 218, 0.3);
            color: #99aab5;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tab:hover {
            background: rgba(114, 137, 218, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(114, 137, 218, 0.3);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #7289da, #43b581);
            color: #ffffff;
            box-shadow: 0 5px 15px rgba(114, 137, 218, 0.4);
        }

        .nav-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .debug-toggle {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .debug-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .debug-toggle::before {
            content: 'üêõ';
            margin-right: 5px;
        }

        .owner-debug-toggle {
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            color: #1a1a2e;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .owner-debug-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .owner-debug-toggle::before {
            content: 'üëë';
            margin-right: 5px;
        }

        .status-bar {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            border-bottom: 1px solid rgba(114, 137, 218, 0.3);
            animation: slideInLeft 1s ease;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(114, 137, 218, 0.1);
            padding: 10px 20px;
            border-radius: 25px;
            border: 1px solid rgba(114, 137, 218, 0.3);
            transition: all 0.3s ease;
            animation: fadeInUp 0.8s ease;
        }

        .status-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(114, 137, 218, 0.3);
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #43b581;
            animation: pulse 2s infinite;
            position: relative;
        }

        .status-dot::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(67, 181, 129, 0.3), transparent);
            animation: sparkle 3s infinite;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .tab-content {
            display: none;
            animation: fadeInUp 0.6s ease;
        }

        .tab-content.active {
            display: block;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(114, 137, 218, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s ease;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #7289da, #43b581, #99aab5);
            background-size: 200% 100%;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: rgba(114, 137, 218, 0.6);
            box-shadow: 0 15px 40px rgba(114, 137, 218, 0.3);
        }

        .card h3 {
            color: #7289da;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #43b581;
            margin-bottom: 5px;
            animation: float 2s ease-in-out infinite;
        }

        .stat-label {
            color: #99aab5;
            font-size: 0.9rem;
        }

        /* Usuarios con fotos de Discord */
        .user-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .user-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid rgba(153, 170, 181, 0.1);
            transition: all 0.3s ease;
            border-radius: 10px;
            margin-bottom: 5px;
        }

        .user-item:hover {
            background: rgba(114, 137, 218, 0.1);
            transform: translateX(10px);
            padding-left: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, #7289da, #43b581);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            overflow: hidden;
            position: relative;
            animation: pulse 3s infinite;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .user-info {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .username {
            color: #ffffff;
            font-weight: 500;
            font-size: 1.1rem;
        }

        .user-id {
            color: #99aab5;
            font-size: 0.8rem;
        }

        .user-roblox {
            color: #43b581;
            font-size: 0.9rem;
            margin-top: 2px;
        }

        .user-badges {
            display: flex;
            gap: 5px;
            margin-top: 5px;
        }

        .badge {
            background: rgba(67, 181, 129, 0.2);
            color: #43b581;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            border: 1px solid rgba(67, 181, 129, 0.3);
        }

        .user-time {
            color: #43b581;
            font-size: 0.8rem;
            text-align: right;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #99aab5;
            animation: pulse 2s infinite;
        }

        .error {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            animation: fadeInUp 0.5s ease;
        }

        /* Debug Panel */
        .debug-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            border-left: 2px solid #7289da;
            padding: 20px;
            overflow-y: auto;
            transition: right 0.4s ease;
            z-index: 1000;
            backdrop-filter: blur(15px);
        }

        .debug-panel.active {
            right: 0;
        }

        .debug-panel h3 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 1px solid rgba(255, 107, 107, 0.3);
            padding-bottom: 10px;
        }

        .debug-section {
            margin-bottom: 25px;
            background: rgba(255, 107, 107, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 107, 107, 0.2);
        }

        .debug-section h4 {
            color: #ff8e8e;
            margin-bottom: 10px;
        }

        .debug-info {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            margin: 5px 0;
            border-left: 3px solid #ff6b6b;
        }

        .debug-button {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .debug-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .close-debug {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #ff6b6b;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-debug:hover {
            transform: rotate(90deg);
            color: #ff8e8e;
        }

        /* Panel Debug de Owner */
        .owner-debug-panel {
            position: fixed;
            top: 0;
            left: -500px;
            width: 500px;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            border-right: 3px solid #ffd700;
            padding: 20px;
            overflow-y: auto;
            transition: left 0.4s ease;
            z-index: 1001;
            backdrop-filter: blur(15px);
        }

        .owner-debug-panel.active {
            left: 0;
        }

        .owner-debug-panel h3 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 1.6rem;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .owner-section {
            margin-bottom: 25px;
            background: rgba(255, 215, 0, 0.1);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .owner-section h4 {
            color: #ffed4a;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .owner-button {
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            color: #1a1a2e;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 8px 5px;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .owner-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .owner-button.danger {
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
        }

        .owner-button.danger:hover {
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
        }

        .owner-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: #ffffff;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 5px;
            font-size: 0.9rem;
            width: 100%;
        }

        .owner-input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .owner-textarea {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: #ffffff;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 5px;
            font-size: 0.9rem;
            width: 100%;
            min-height: 100px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        .owner-textarea:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .owner-info {
            background: rgba(0, 0, 0, 0.6);
            padding: 12px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            margin: 8px 0;
            border-left: 4px solid #ffd700;
            color: #ffed4a;
        }

        .close-owner-debug {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #ffd700;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-owner-debug:hover {
            transform: rotate(90deg);
            color: #ffed4a;
        }

        /* Controles avanzados */
        .advanced-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .control-button {
            background: linear-gradient(45deg, #7289da, #99aab5);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .control-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transition: all 0.6s ease;
            transform: translate(-50%, -50%);
        }

        .control-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .control-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(114, 137, 218, 0.4);
        }

        /* Gr√°ficos animados mejorados */
        .chart-container {
            margin-top: 20px;
            height: 250px;
            display: flex;
            align-items: end;
            justify-content: space-around;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(114, 137, 218, 0.1), rgba(67, 181, 129, 0.1));
            animation: gradientShift 4s ease infinite;
        }

        .chart-bar {
            width: 40px;
            background: linear-gradient(to top, #7289da, #43b581);
            border-radius: 8px 8px 0 0;
            transition: all 0.5s ease;
            position: relative;
            animation: barGrow 1s ease;
            margin: 0 5px;
        }

        @keyframes barGrow {
            from { height: 0; }
            to { height: var(--height); }
        }

        .chart-bar:hover {
            transform: scale(1.1);
            background: linear-gradient(to top, #43b581, #7289da);
            box-shadow: 0 0 20px rgba(67, 181, 129, 0.5);
        }

        .chart-label {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: #99aab5;
            white-space: nowrap;
        }

        .chart-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #ffffff;
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 8px;
            border-radius: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .chart-bar:hover .chart-value {
            opacity: 1;
        }

        /* Analytics avanzado */
        .analytics-chart {
            height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .analytics-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: rgba(114, 137, 218, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(114, 137, 218, 0.3);
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            background: rgba(114, 137, 218, 0.2);
            transform: translateY(-5px);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #43b581;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #99aab5;
            font-size: 0.9rem;
        }

        .metric-change {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .metric-change.positive {
            color: #43b581;
        }

        .metric-change.negative {
            color: #ff6b6b;
        }

        /* Responsive design mejorado */
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-bar {
                flex-direction: column;
                text-align: center;
            }
            
            .debug-panel, .owner-debug-panel {
                width: 100%;
                right: -100%;
                left: -100%;
            }
            
            .advanced-controls {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Sistema de notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #43b581, #7289da);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(67, 181, 129, 0.3);
            transform: translateX(400px);
            transition: transform 0.4s ease;
            z-index: 1002;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .auto-refresh {
            color: #43b581;
            font-size: 0.9rem;
            text-align: center;
            margin-top: 15px;
            animation: pulse 3s infinite;
        }

        .api-info {
            background: rgba(114, 137, 218, 0.1);
            border: 1px solid rgba(114, 137, 218, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            animation: fadeInUp 1s ease;
        }

        .api-info h3 {
            color: #7289da;
            margin-bottom: 15px;
        }

        .api-endpoint {
            background: rgba(0, 0, 0, 0.4);
            padding: 12px 18px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 8px 0;
            border-left: 4px solid #43b581;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .api-endpoint:hover {
            background: rgba(0, 0, 0, 0.6);
            transform: translateX(10px);
            border-left-color: #7289da;
        }

        /* Efectos de part√≠culas */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #7289da;
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <!-- Part√≠culas de fondo -->
    <div class="particles" id="particles"></div>

    <div class="header">
        <h1>ü§ñ RbxServers Dashboard Pro</h1>
        <p>Panel de Control Avanzado en Tiempo Real</p>
    </div>

    <!-- Barra de navegaci√≥n avanzada -->
    <div class="nav-bar">
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="overview">üìä Overview</div>
            <div class="nav-tab" data-tab="users">üë• Usuarios</div>
            <div class="nav-tab" data-tab="servers">üéÆ Servidores</div>
            <div class="nav-tab" data-tab="analytics">üìà Analytics</div>
            <div class="nav-tab" data-tab="logs">üìù Logs</div>
        </div>
        <div class="nav-controls">
            <button class="owner-debug-toggle" onclick="toggleOwnerDebug()">Owner Panel</button>
            <button class="debug-toggle" onclick="toggleDebug()">Debug Console</button>
            <button class="control-button" onclick="exportData()">üì§ Exportar</button>
        </div>
    </div>

    <div class="status-bar">
        <div class="status-item">
            <div class="status-dot"></div>
            <span>Bot Online</span>
        </div>
        <div class="status-item">
            <div class="status-dot"></div>
            <span>API Activa</span>
        </div>
        <div class="status-item">
            <div class="status-dot"></div>
            <span id="lastUpdate">Actualizado: Cargando...</span>
        </div>
        <div class="status-item">
            <div class="status-dot"></div>
            <span id="connectionStatus">Conectado</span>
        </div>
    </div>

    <div class="container">
        <div id="errorContainer"></div>
        
        <!-- Tab: Overview -->
        <div class="tab-content active" id="overview-tab">
            <div class="grid">
                <!-- Estad√≠sticas Generales -->
                <div class="card">
                    <h3>üìä Estad√≠sticas Generales</h3>
                    <div class="stat-number" id="totalVerified">-</div>
                    <div class="stat-label">Usuarios Verificados</div>
                    
                    <div style="margin-top: 20px;">
                        <div class="stat-number" id="totalBanned">-</div>
                        <div class="stat-label">Usuarios Baneados</div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <div class="stat-number" id="totalServers">-</div>
                        <div class="stat-label">Servidores VIP Totales</div>
                    </div>
                </div>

                <!-- Estado del Sistema -->
                <div class="card">
                    <h3>ü§ñ Estado del Sistema</h3>
                    <div class="stat-number" id="robloxScripts">-</div>
                    <div class="stat-label">Scripts de Roblox Conectados</div>
                    
                    <div style="margin-top: 20px;">
                        <div class="stat-number" id="activeCommands">-</div>
                        <div class="stat-label">Comandos Activos</div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <div class="stat-number" id="usersWithServers">-</div>
                        <div class="stat-label">Usuarios con Servidores</div>
                    </div>
                </div>

                <!-- Actividad en Tiempo Real -->
                <div class="card">
                    <h3>‚ö° Actividad en Tiempo Real</h3>
                    <div class="stat-number" id="recentVerifications">-</div>
                    <div class="stat-label">Verificaciones (24h)</div>
                    
                    <div style="margin-top: 20px;">
                        <div class="stat-number" id="recentBans">-</div>
                        <div class="stat-label">Bans Recientes (7d)</div>
                    </div>
                    
                    <div class="chart-container" id="activityChart"></div>
                </div>

                <!-- Rendimiento del Sistema -->
                <div class="card">
                    <h3>‚öôÔ∏è Rendimiento del Sistema</h3>
                    <div id="performanceMetrics">
                        <div style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>CPU Usage</span>
                                <span id="cpuUsage">-</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                                <div id="cpuBar" style="background: linear-gradient(90deg, #43b581, #7289da); height: 100%; border-radius: 4px; width: 0%; transition: width 0.5s ease;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Memory Usage</span>
                                <span id="memoryUsage">-</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                                <div id="memoryBar" style="background: linear-gradient(90deg, #7289da, #43b581); height: 100%; border-radius: 4px; width: 0%; transition: width 0.5s ease;"></div>
                            </div>
                        </div>
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>API Response Time</span>
                                <span id="responseTime">-</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                                <div id="responseBar" style="background: linear-gradient(90deg, #43b581, #ff6b6b); height: 100%; border-radius: 4px; width: 0%; transition: width 0.5s ease;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Usuarios -->
        <div class="tab-content" id="users-tab">
            <div class="grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <h3>üë• Usuarios Verificados con Fotos de Discord</h3>
                    <div id="recentUsers" class="user-list">
                        <div class="loading">Cargando usuarios...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Servidores -->
        <div class="tab-content" id="servers-tab">
            <div class="grid">
                <div class="card">
                    <h3>üéÆ Distribuci√≥n de Servidores</h3>
                    <div id="serverDistribution"></div>
                </div>
                <div class="card">
                    <h3>üìä Estad√≠sticas de Juegos</h3>
                    <div id="gameStats"></div>
                </div>
            </div>
        </div>

        <!-- Tab: Analytics Mejorado -->
        <div class="tab-content" id="analytics-tab">
            <div class="analytics-metrics">
                <div class="metric-card">
                    <div class="metric-value" id="analyticsUsers">-</div>
                    <div class="metric-label">Usuarios Totales</div>
                    <div class="metric-change positive" id="usersChange">+12% esta semana</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="analyticsCommands">-</div>
                    <div class="metric-label">Comandos Ejecutados</div>
                    <div class="metric-change positive" id="commandsChange">+8% hoy</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="analyticsUptime">99.8%</div>
                    <div class="metric-label">Uptime</div>
                    <div class="metric-change positive">+0.2% este mes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="analyticsResponse">-</div>
                    <div class="metric-label">Respuesta Promedio</div>
                    <div class="metric-change negative" id="responseChange">-15ms hoy</div>
                </div>
            </div>
            
            <div class="grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <h3>üìà Analytics Avanzado en Tiempo Real</h3>
                    <div class="analytics-chart" id="analyticsChart">
                        <canvas id="analyticsCanvas" width="100%" height="350"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üìä Actividad por Horas</h3>
                    <div class="chart-container" style="height: 200px;" id="hourlyChart"></div>
                </div>
                
                <div class="card">
                    <h3>üéØ Distribuci√≥n de Comandos</h3>
                    <div id="commandDistribution"></div>
                </div>
            </div>
        </div>

        <!-- Tab: Logs -->
        <div class="tab-content" id="logs-tab">
            <div class="grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <h3>üìù System Logs</h3>
                    <div id="systemLogs" style="max-height: 500px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 0.9rem;"></div>
                </div>
            </div>
        </div>

        <!-- Controles Avanzados -->
        <div class="advanced-controls">
            <button class="control-button" onclick="refreshAllData()">üîÑ Actualizar Todo</button>
            <button class="control-button" onclick="clearCache()">üßπ Limpiar Cache</button>
            <button class="control-button" onclick="downloadReport()">üìä Generar Reporte</button>
            <button class="control-button" onclick="toggleTheme()">üåô Cambiar Tema</button>
            <button class="control-button" onclick="showNotification('Sistema funcionando correctamente ‚úÖ')">üîî Test Notificaci√≥n</button>
        </div>
        
        <div class="auto-refresh">
            ‚è∞ Actualizaci√≥n autom√°tica cada 30 segundos
        </div>

        <!-- Informaci√≥n de la API -->
        <div class="api-info">
            <h3>üîå Endpoints de la API</h3>
            <p>Esta p√°gina consume los siguientes endpoints en tiempo real:</p>
            <div class="api-endpoint" onclick="testEndpoint('/api/verified-users')">GET /api/verified-users</div>
            <div class="api-endpoint" onclick="testEndpoint('/api/user-stats')">GET /api/user-stats</div>
            <div class="api-endpoint" onclick="testEndpoint('/api/server-stats')">GET /api/server-stats</div>
            <div class="api-endpoint" onclick="testEndpoint('/api/bot-status')">GET /api/bot-status</div>
            <div class="api-endpoint" onclick="testEndpoint('/api/recent-activity')">GET /api/recent-activity</div>
            <p style="margin-top: 15px; color: #99aab5;">
                üîë API Key: <code>rbxservers_webhook_secret_2024</code>
            </p>
        </div>
    </div>

    <!-- Debug Panel -->
    <div class="debug-panel" id="debugPanel">
        <button class="close-debug" onclick="toggleDebug()">&times;</button>
        <h3>üêõ Debug Console</h3>
        
        <div class="debug-section">
            <h4>System Information</h4>
            <div class="debug-info" id="debugSystemInfo">Cargando informaci√≥n del sistema...</div>
            <button class="debug-button" onclick="refreshDebugInfo()">Actualizar Info</button>
        </div>
        
        <div class="debug-section">
            <h4>API Status</h4>
            <div class="debug-info" id="debugApiStatus">Verificando estado de la API...</div>
            <button class="debug-button" onclick="testAllEndpoints()">Test All Endpoints</button>
        </div>
        
        <div class="debug-section">
            <h4>Performance Metrics</h4>
            <div class="debug-info" id="debugPerformance">Recolectando m√©tricas...</div>
            <button class="debug-button" onclick="runPerformanceTest()">Run Performance Test</button>
        </div>
        
        <div class="debug-section">
            <h4>Console Logs</h4>
            <div class="debug-info" id="debugLogs" style="max-height: 200px; overflow-y: auto;">Logs aparecer√°n aqu√≠...</div>
            <button class="debug-button" onclick="clearDebugLogs()">Clear Logs</button>
        </div>
    </div>

    <!-- Panel Debug de Owner -->
    <div class="owner-debug-panel" id="ownerDebugPanel">
        <button class="close-owner-debug" onclick="toggleOwnerDebug()">&times;</button>
        <h3>üëë Owner Control Panel</h3>
        
        <div class="owner-section">
            <h4>üéÆ Control del Bot</h4>
            <button class="owner-button" onclick="restartBot()">üîÑ Reiniciar Bot</button>
            <button class="owner-button" onclick="syncCommands()">‚ö° Sync Comandos</button>
            <button class="owner-button" onclick="clearAllCaches()">üßπ Limpiar Todo Cache</button>
            <button class="owner-button danger" onclick="emergencyStop()">üõë Parada Emergencia</button>
        </div>
        
        <div class="owner-section">
            <h4>üë• Gesti√≥n de Usuarios</h4>
            <input type="text" class="owner-input" id="userIdInput" placeholder="Discord User ID">
            <button class="owner-button" onclick="verifyUser()">‚úÖ Verificar Usuario</button>
            <button class="owner-button danger" onclick="banUser()">üö´ Banear Usuario</button>
            <button class="owner-button" onclick="unbanUser()">üîì Desbanear Usuario</button>
            <button class="owner-button" onclick="getUserInfo()">üìã Info Usuario</button>
        </div>
        
        <div class="owner-section">
            <h4>üìä An√°lisis Avanzado</h4>
            <div class="owner-info" id="ownerStats">Cargando estad√≠sticas avanzadas...</div>
            <button class="owner-button" onclick="generateAdvancedReport()">üìà Reporte Completo</button>
            <button class="owner-button" onclick="exportUserData()">üíæ Exportar Datos</button>
            <button class="owner-button" onclick="analyzePerformance()">‚ö° An√°lisis Rendimiento</button>
        </div>
        
        <div class="owner-section">
            <h4>üõ†Ô∏è Herramientas de Sistema</h4>
            <button class="owner-button" onclick="backupData()">üíæ Backup Datos</button>
            <button class="owner-button" onclick="restoreData()">üì• Restaurar Datos</button>
            <button class="owner-button" onclick="optimizeDatabase()">üóÉÔ∏è Optimizar BD</button>
            <button class="owner-button" onclick="checkSystemHealth()">ü©∫ Salud Sistema</button>
        </div>
        
        <div class="owner-section">
            <h4>üì¢ Anuncios y Notificaciones</h4>
            <textarea class="owner-textarea" id="announcementText" placeholder="Escribir anuncio para todos los usuarios..."></textarea>
            <button class="owner-button" onclick="sendGlobalAnnouncement()">üì¢ Enviar Anuncio Global</button>
            <button class="owner-button" onclick="sendTestNotification()">üîî Test Notificaci√≥n</button>
        </div>
        
        <div class="owner-section">
            <h4>üîß Comandos Personalizados</h4>
            <textarea class="owner-textarea" id="customCommand" placeholder="Comando API personalizado (JSON)..."></textarea>
            <button class="owner-button" onclick="executeCustomCommand()">‚ö° Ejecutar Comando</button>
            <div class="owner-info" id="commandResult">Resultado aparecer√° aqu√≠...</div>
        </div>
        
        <div class="owner-section">
            <h4>üìà M√©tricas en Tiempo Real</h4>
            <div class="owner-info" id="realTimeMetrics">Actualizando m√©tricas...</div>
            <button class="owner-button" onclick="toggleRealTimeMonitoring()">üìä Toggle Monitoreo</button>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification" id="notification"></div>

    <script>
        const API_BASE_URL = window.location.origin;
        const API_KEY = 'rbxservers_webhook_secret_2024';
        let debugLogs = [];
        let currentTheme = 'dark';
        let isOwner = false; // Esto deber√≠a verificarse con el servidor
        let realTimeMonitoring = false;
        let analyticsChart = null;
        let performanceMetrics = {
            apiCalls: 0,
            averageResponseTime: 0,
            errors: 0,
            totalCommands: 0,
            dailyUsers: []
        };

        const headers = {
            'Authorization': `Bearer ${API_KEY}`,
            'Content-Type': 'application/json'
        };

        // Sistema de logs para debug
        function addDebugLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            debugLogs.push({
                timestamp,
                message,
                type
            });
            
            updateDebugLogs();
            
            // Mantener solo los √∫ltimos 50 logs
            if (debugLogs.length > 50) {
                debugLogs = debugLogs.slice(-50);
            }
        }

        function updateDebugLogs() {
            const debugLogsEl = document.getElementById('debugLogs');
            debugLogsEl.innerHTML = debugLogs.slice(-10).map(log => 
                `<div style="color: ${getLogColor(log.type)};">[${log.timestamp}] ${log.message}</div>`
            ).join('');
            debugLogsEl.scrollTop = debugLogsEl.scrollHeight;
        }

        function getLogColor(type) {
            switch(type) {
                case 'error': return '#ff6b6b';
                case 'warning': return '#ffa500';
                case 'success': return '#43b581';
                default: return '#99aab5';
            }
        }

        function clearDebugLogs() {
            debugLogs = [];
            updateDebugLogs();
            showNotification('Debug logs cleared', 'info');
        }

        // Sistema de notificaciones
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification show ${type}`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function showError(message) {
            const errorContainer = document.getElementById('errorContainer');
            errorContainer.innerHTML = `
                <div class="error">
                    ‚ùå ${message}
                </div>
            `;
            setTimeout(() => {
                errorContainer.innerHTML = '';
            }, 5000);
            
            addDebugLog(`Error: ${message}`, 'error');
        }

        // Sistema de pesta√±as
        function initTabs() {
            const tabs = document.querySelectorAll('.nav-tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover active de todas las pesta√±as
                    tabs.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));
                    
                    // Activar pesta√±a seleccionada
                    tab.classList.add('active');
                    const targetTab = document.getElementById(`${tab.dataset.tab}-tab`);
                    if (targetTab) {
                        targetTab.classList.add('active');
                    }
                    
                    addDebugLog(`Switched to tab: ${tab.dataset.tab}`, 'info');
                    
                    // Cargar contenido espec√≠fico de la pesta√±a
                    if (tab.dataset.tab === 'analytics') {
                        initAnalyticsChart();
                    }
                });
            });
        }

        async function apiRequest(endpoint) {
            const startTime = performance.now();
            performanceMetrics.apiCalls++;
            
            try {
                addDebugLog(`Making API request to: ${endpoint}`, 'info');
                const response = await fetch(`${API_BASE_URL}${endpoint}`, { headers });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                const responseTime = performance.now() - startTime;
                performanceMetrics.averageResponseTime = 
                    (performanceMetrics.averageResponseTime + responseTime) / 2;
                
                addDebugLog(`API request successful: ${endpoint} (${responseTime.toFixed(2)}ms)`, 'success');
                return data;
            } catch (error) {
                performanceMetrics.errors++;
                addDebugLog(`API request failed: ${endpoint} - ${error.message}`, 'error');
                throw error;
            }
        }

        // Generar avatar de Discord
        function generateDiscordAvatar(discordId, username) {
            const avatarUrl = `https://cdn.discordapp.com/avatars/${discordId}/avatar.png`;
            return `
                <div class="user-avatar">
                    <img src="${avatarUrl}" 
                         onerror="this.style.display='none'; this.parentElement.innerHTML='${username.charAt(0).toUpperCase()}'"
                         alt="${username}">
                </div>
            `;
        }

        async function loadUserStats() {
            try {
                const data = await apiRequest('/api/user-stats');
                const stats = data.statistics;
                
                document.getElementById('totalVerified').textContent = stats.total_verified || 0;
                document.getElementById('totalBanned').textContent = stats.total_banned || 0;
                
                // Actualizar analytics
                document.getElementById('analyticsUsers').textContent = stats.total_verified || 0;
                
                // Simular m√©tricas de rendimiento
                updatePerformanceMetrics();
                
            } catch (error) {
                showError('Error cargando estad√≠sticas de usuarios');
            }
        }

        async function loadServerStats() {
            try {
                const data = await apiRequest('/api/server-stats');
                const stats = data.server_statistics;
                
                document.getElementById('totalServers').textContent = stats.total_servers || 0;
                document.getElementById('usersWithServers').textContent = stats.total_users_with_servers || 0;
                
            } catch (error) {
                showError('Error cargando estad√≠sticas de servidores');
            }
        }

        async function loadBotStatus() {
            try {
                const data = await apiRequest('/api/bot-status');
                const status = data.bot_status;
                
                document.getElementById('robloxScripts').textContent = status.roblox_scripts_connected || 0;
                document.getElementById('activeCommands').textContent = status.active_commands || 0;
                
                // Actualizar analytics
                performanceMetrics.totalCommands += status.active_commands || 0;
                document.getElementById('analyticsCommands').textContent = performanceMetrics.totalCommands;
                
            } catch (error) {
                showError('Error cargando estado del bot');
            }
        }

        async function loadVerifiedUsers() {
            try {
                const data = await apiRequest('/api/verified-users');
                const users = data.users || [];
                
                const userListHtml = users.slice(0, 20).map(user => {
                    const avatar = generateDiscordAvatar(user.discord_id, user.roblox_username);
                    return `
                        <div class="user-item">
                            ${avatar}
                            <div class="user-info">
                                <div class="username">${user.roblox_username}</div>
                                <div class="user-id">Discord: ${user.discord_id}</div>
                                <div class="user-roblox">üéÆ Roblox Verificado</div>
                                <div class="user-badges">
                                    <span class="badge">‚úÖ Verificado</span>
                                    ${user.expires_in_hours > 0 ? `<span class="badge">‚è∞ ${user.expires_in_hours}h restantes</span>` : ''}
                                </div>
                            </div>
                            <div class="user-time">
                                <div>Hace ${user.days_since_verification || 0}d</div>
                                <div style="font-size: 0.7rem; color: #7289da;">ID: ${user.discord_id.slice(-4)}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                document.getElementById('recentUsers').innerHTML = userListHtml || '<div class="loading">No hay usuarios verificados</div>';
                
            } catch (error) {
                document.getElementById('recentUsers').innerHTML = '<div class="loading">Error cargando usuarios</div>';
            }
        }

        async function loadRecentActivity() {
            try {
                const data = await apiRequest('/api/recent-activity');
                const activity = data.recent_activity;
                
                document.getElementById('recentVerifications').textContent = activity.recent_verifications?.length || 0;
                document.getElementById('recentBans').textContent = activity.recent_bans?.length || 0;
                
                updateActivityChart();
                updateCommandDistribution();
                
            } catch (error) {
                showError('Error cargando actividad reciente');
            }
        }

        function updatePerformanceMetrics() {
            // Simular m√©tricas de rendimiento
            const cpuUsage = Math.random() * 100;
            const memoryUsage = Math.random() * 100;
            const responseTime = performanceMetrics.averageResponseTime;
            
            document.getElementById('cpuUsage').textContent = `${cpuUsage.toFixed(1)}%`;
            document.getElementById('memoryUsage').textContent = `${memoryUsage.toFixed(1)}%`;
            document.getElementById('responseTime').textContent = `${responseTime.toFixed(0)}ms`;
            document.getElementById('analyticsResponse').textContent = `${responseTime.toFixed(0)}ms`;
            
            document.getElementById('cpuBar').style.width = `${cpuUsage}%`;
            document.getElementById('memoryBar').style.width = `${memoryUsage}%`;
            document.getElementById('responseBar').style.width = `${Math.min(responseTime / 10, 100)}%`;
        }

        function updateActivityChart() {
            const chartContainer = document.getElementById('activityChart');
            const days = ['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'];
            
            chartContainer.innerHTML = days.map(day => {
                const height = Math.random() * 180 + 20;
                const value = Math.floor(Math.random() * 50);
                return `
                    <div class="chart-bar" style="--height: ${height}px; height: ${height}px;">
                        <div class="chart-label">${day}</div>
                        <div class="chart-value">${value}</div>
                    </div>
                `;
            }).join('');
        }

        function updateCommandDistribution() {
            const commandDistribution = document.getElementById('commandDistribution');
            const commands = [
                { name: '/verify', count: 156, color: '#43b581' },
                { name: '/scrape', count: 89, color: '#7289da' },
                { name: '/game', count: 67, color: '#99aab5' },
                { name: '/servertest', count: 45, color: '#faa61a' },
                { name: 'Otros', count: 23, color: '#747f8d' }
            ];
            
            const total = commands.reduce((sum, cmd) => sum + cmd.count, 0);
            
            commandDistribution.innerHTML = commands.map(cmd => {
                const percentage = ((cmd.count / total) * 100).toFixed(1);
                return `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0; padding: 8px; background: rgba(${hexToRgb(cmd.color)}, 0.1); border-radius: 8px; border-left: 4px solid ${cmd.color};">
                        <span style="color: ${cmd.color}; font-weight: bold;">${cmd.name}</span>
                        <div style="text-align: right;">
                            <div style="color: #ffffff; font-weight: bold;">${cmd.count}</div>
                            <div style="color: #99aab5; font-size: 0.8rem;">${percentage}%</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? 
                `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` :
                '114, 137, 218';
        }

        function initAnalyticsChart() {
            const canvas = document.getElementById('analyticsCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 350;
            
            // Simular datos de tiempo real
            const data = [];
            const labels = [];
            const now = new Date();
            
            for (let i = 23; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60 * 60 * 1000);
                labels.push(time.getHours() + ':00');
                data.push(Math.floor(Math.random() * 100) + 50);
            }
            
            drawLineChart(ctx, data, labels, canvas.width, canvas.height);
        }

        function drawLineChart(ctx, data, labels, width, height) {
            const padding = 60;
            const chartWidth = width - padding * 2;
            const chartHeight = height - padding * 2;
            
            // Limpiar canvas
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, width, height);
            
            // Configurar gradiente
            const gradient = ctx.createLinearGradient(0, padding, 0, height - padding);
            gradient.addColorStop(0, 'rgba(114, 137, 218, 0.3)');
            gradient.addColorStop(1, 'rgba(67, 181, 129, 0.1)');
            
            // Dibujar √°rea bajo la l√≠nea
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            
            data.forEach((value, index) => {
                const x = padding + (index / (data.length - 1)) * chartWidth;
                const y = height - padding - (value / 150) * chartHeight;
                
                if (index === 0) {
                    ctx.lineTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.lineTo(width - padding, height - padding);
            ctx.closePath();
            ctx.fillStyle = gradient;
            ctx.fill();
            
            // Dibujar l√≠nea principal
            ctx.beginPath();
            ctx.strokeStyle = '#7289da';
            ctx.lineWidth = 3;
            
            data.forEach((value, index) => {
                const x = padding + (index / (data.length - 1)) * chartWidth;
                const y = height - padding - (value / 150) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // Dibujar puntos
            data.forEach((value, index) => {
                const x = padding + (index / (data.length - 1)) * chartWidth;
                const y = height - padding - (value / 150) * chartHeight;
                
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#43b581';
                ctx.fill();
                ctx.strokeStyle = '#ffffff';
                ctx.lineWidth = 2;
                ctx.stroke();
            });
            
            // Dibujar labels
            ctx.fillStyle = '#99aab5';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            labels.forEach((label, index) => {
                if (index % 4 === 0) { // Mostrar solo cada 4 labels
                    const x = padding + (index / (data.length - 1)) * chartWidth;
                    ctx.fillText(label, x, height - 20);
                }
            });
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Funciones de control
        function toggleDebug() {
            const debugPanel = document.getElementById('debugPanel');
            debugPanel.classList.toggle('active');
            
            if (debugPanel.classList.contains('active')) {
                refreshDebugInfo();
                addDebugLog('Debug panel opened', 'info');
            }
        }

        function toggleOwnerDebug() {
            const ownerPanel = document.getElementById('ownerDebugPanel');
            ownerPanel.classList.toggle('active');
            
            if (ownerPanel.classList.contains('active')) {
                updateOwnerStats();
                addDebugLog('Owner panel opened', 'info');
            }
        }

        function refreshDebugInfo() {
            const systemInfo = document.getElementById('debugSystemInfo');
            const apiStatus = document.getElementById('debugApiStatus');
            const debugPerformance = document.getElementById('debugPerformance');
            
            systemInfo.innerHTML = `
                User Agent: ${navigator.userAgent}<br>
                Screen: ${screen.width}x${screen.height}<br>
                Language: ${navigator.language}<br>
                Online: ${navigator.onLine ? 'Yes' : 'No'}<br>
                Cookies: ${navigator.cookieEnabled ? 'Enabled' : 'Disabled'}
            `;
            
            apiStatus.innerHTML = `
                Base URL: ${API_BASE_URL}<br>
                API Calls: ${performanceMetrics.apiCalls}<br>
                Errors: ${performanceMetrics.errors}<br>
                Success Rate: ${((performanceMetrics.apiCalls - performanceMetrics.errors) / performanceMetrics.apiCalls * 100).toFixed(1)}%
            `;
            
            debugPerformance.innerHTML = `
                Avg Response Time: ${performanceMetrics.averageResponseTime.toFixed(2)}ms<br>
                Memory Usage: ${(performance.memory?.usedJSHeapSize / 1024 / 1024).toFixed(1) || 'N/A'} MB<br>
                Page Load Time: ${(performance.now()).toFixed(0)}ms<br>
                Connection: ${navigator.connection?.effectiveType || 'Unknown'}
            `;
        }

        // Funciones del panel Owner
        function updateOwnerStats() {
            const ownerStats = document.getElementById('ownerStats');
            ownerStats.innerHTML = `
                üéÆ Bot Uptime: ${((performance.now() / 1000 / 60).toFixed(1))} minutos<br>
                üìä API Calls: ${performanceMetrics.apiCalls}<br>
                ‚ö° Avg Response: ${performanceMetrics.averageResponseTime.toFixed(2)}ms<br>
                üéØ Success Rate: ${((performanceMetrics.apiCalls - performanceMetrics.errors) / performanceMetrics.apiCalls * 100).toFixed(1)}%<br>
                üíæ Memory: ${(performance.memory?.usedJSHeapSize / 1024 / 1024).toFixed(1) || 'N/A'} MB<br>
                üåê Connection: ${navigator.connection?.effectiveType || 'Unknown'}<br>
                üì± Platform: ${navigator.platform}<br>
                üîÑ Last Update: ${new Date().toLocaleTimeString()}
            `;
        }

        function updateRealTimeMetrics() {
            if (!realTimeMonitoring) return;
            
            const metricsEl = document.getElementById('realTimeMetrics');
            const now = new Date();
            
            metricsEl.innerHTML = `
                ‚è∞ ${now.toLocaleTimeString()}<br>
                üîÑ Auto-refresh: ${realTimeMonitoring ? 'ON' : 'OFF'}<br>
                üìä Total API Calls: ${performanceMetrics.apiCalls}<br>
                ‚ö° Current Response Time: ${performanceMetrics.averageResponseTime.toFixed(2)}ms<br>
                üéØ Error Rate: ${(performanceMetrics.errors / performanceMetrics.apiCalls * 100).toFixed(1)}%<br>
                üíª CPU Usage: ${(Math.random() * 100).toFixed(1)}%<br>
                üíæ Memory Usage: ${(Math.random() * 100).toFixed(1)}%<br>
                üåê Network Latency: ${(Math.random() * 50 + 10).toFixed(0)}ms
            `;
        }

        // Funciones Owner
        async function restartBot() {
            if (confirm('¬øEst√°s seguro de que quieres reiniciar el bot?')) {
                showNotification('üîÑ Reiniciando bot...', 'info');
                // Aqu√≠ ir√≠a la llamada a la API para reiniciar
                addDebugLog('Bot restart initiated by owner', 'warning');
            }
        }

        async function syncCommands() {
            showNotification('‚ö° Sincronizando comandos...', 'info');
            // Simular sincronizaci√≥n
            setTimeout(() => {
                showNotification('‚úÖ Comandos sincronizados exitosamente', 'success');
                addDebugLog('Commands synced successfully', 'success');
            }, 2000);
        }

        async function clearAllCaches() {
            showNotification('üßπ Limpiando todos los caches...', 'info');
            // Limpiar caches del navegador
            if ('caches' in window) {
                const cacheNames = await caches.keys();
                await Promise.all(cacheNames.map(name => caches.delete(name)));
            }
            localStorage.clear();
            sessionStorage.clear();
            showNotification('‚úÖ Todos los caches limpiados', 'success');
            addDebugLog('All caches cleared by owner', 'info');
        }

        async function emergencyStop() {
            if (confirm('üõë PARADA DE EMERGENCIA - ¬øEst√°s completamente seguro?')) {
                showNotification('üõë Ejecutando parada de emergencia...', 'error');
                addDebugLog('EMERGENCY STOP initiated by owner', 'error');
                // Aqu√≠ ir√≠a la l√≥gica de parada de emergencia
            }
        }

        async function verifyUser() {
            const userId = document.getElementById('userIdInput').value;
            if (!userId) {
                showNotification('‚ùå Ingresa un Discord User ID', 'error');
                return;
            }
            showNotification(`‚úÖ Verificando usuario ${userId}...`, 'info');
            addDebugLog(`Owner manually verified user: ${userId}`, 'info');
        }

        async function banUser() {
            const userId = document.getElementById('userIdInput').value;
            if (!userId) {
                showNotification('‚ùå Ingresa un Discord User ID', 'error');
                return;
            }
            if (confirm(`¬øBanear al usuario ${userId}?`)) {
                showNotification(`üö´ Baneando usuario ${userId}...`, 'warning');
                addDebugLog(`Owner banned user: ${userId}`, 'warning');
            }
        }

        async function unbanUser() {
            const userId = document.getElementById('userIdInput').value;
            if (!userId) {
                showNotification('‚ùå Ingresa un Discord User ID', 'error');
                return;
            }
            showNotification(`üîì Desbaneando usuario ${userId}...`, 'info');
            addDebugLog(`Owner unbanned user: ${userId}`, 'info');
        }

        async function getUserInfo() {
            const userId = document.getElementById('userIdInput').value;
            if (!userId) {
                showNotification('‚ùå Ingresa un Discord User ID', 'error');
                return;
            }
            
            try {
                const data = await apiRequest(`/api/user-details/${userId}`);
                const result = document.getElementById('commandResult');
                result.innerHTML = `
                    Usuario: ${userId}<br>
                    Verificado: ${data.verification?.is_verified ? '‚úÖ' : '‚ùå'}<br>
                    Roblox: ${data.verification?.roblox_username || 'N/A'}<br>
                    Baneado: ${data.moderation?.is_banned ? 'üö´' : '‚úÖ'}<br>
                    Servidores: ${data.servers?.total_servers || 0}<br>
                    Juegos: ${data.servers?.total_games || 0}
                `;
                addDebugLog(`Owner requested info for user: ${userId}`, 'info');
            } catch (error) {
                showNotification('‚ùå Error obteniendo informaci√≥n del usuario', 'error');
            }
        }

        async function generateAdvancedReport() {
            showNotification('üìà Generando reporte avanzado...', 'info');
            // Simular generaci√≥n de reporte
            setTimeout(() => {
                const reportData = {
                    timestamp: new Date().toISOString(),
                    metrics: performanceMetrics,
                    users: { verified: 40, banned: 0 },
                    servers: { total: 5, active: 5 }
                };
                
                const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `advanced-report-${Date.now()}.json`;
                a.click();
                
                showNotification('‚úÖ Reporte avanzado generado', 'success');
                addDebugLog('Advanced report generated by owner', 'info');
            }, 2000);
        }

        async function exportUserData() {
            showNotification('üíæ Exportando datos de usuarios...', 'info');
            addDebugLog('User data export initiated by owner', 'info');
        }

        async function analyzePerformance() {
            showNotification('‚ö° Analizando rendimiento...', 'info');
            addDebugLog('Performance analysis initiated by owner', 'info');
        }

        async function backupData() {
            showNotification('üíæ Creando backup...', 'info');
            addDebugLog('Data backup initiated by owner', 'info');
        }

        async function restoreData() {
            if (confirm('¬øRestaurar datos desde backup?')) {
                showNotification('üì• Restaurando datos...', 'warning');
                addDebugLog('Data restore initiated by owner', 'warning');
            }
        }

        async function optimizeDatabase() {
            showNotification('üóÉÔ∏è Optimizando base de datos...', 'info');
            addDebugLog('Database optimization initiated by owner', 'info');
        }

        async function checkSystemHealth() {
            showNotification('ü©∫ Verificando salud del sistema...', 'info');
            setTimeout(() => {
                updateOwnerStats();
                showNotification('‚úÖ Sistema funcionando correctamente', 'success');
                addDebugLog('System health check completed by owner', 'success');
            }, 1500);
        }

        async function sendGlobalAnnouncement() {
            const text = document.getElementById('announcementText').value;
            if (!text) {
                showNotification('‚ùå Escribe un anuncio primero', 'error');
                return;
            }
            
            if (confirm(`¬øEnviar anuncio global a todos los usuarios?\n\n"${text}"`)) {
                showNotification('üì¢ Enviando anuncio global...', 'info');
                addDebugLog(`Global announcement sent by owner: "${text.substring(0, 50)}..."`, 'info');
                document.getElementById('announcementText').value = '';
            }
        }

        async function sendTestNotification() {
            showNotification('üîî Esta es una notificaci√≥n de prueba del owner', 'info');
            addDebugLog('Test notification sent by owner', 'info');
        }

        async function executeCustomCommand() {
            const command = document.getElementById('customCommand').value;
            if (!command) {
                showNotification('‚ùå Escribe un comando primero', 'error');
                return;
            }
            
            try {
                const commandObj = JSON.parse(command);
                showNotification('‚ö° Ejecutando comando personalizado...', 'info');
                
                // Simular ejecuci√≥n
                setTimeout(() => {
                    const result = document.getElementById('commandResult');
                    result.innerHTML = `
                        Comando ejecutado: ${commandObj.action || 'N/A'}<br>
                        Timestamp: ${new Date().toLocaleTimeString()}<br>
                        Status: ‚úÖ Completado<br>
                        Response: Comando personalizado ejecutado exitosamente
                    `;
                    showNotification('‚úÖ Comando ejecutado exitosamente', 'success');
                    addDebugLog(`Custom command executed by owner: ${commandObj.action}`, 'info');
                }, 1000);
                
            } catch (error) {
                showNotification('‚ùå Error: JSON inv√°lido', 'error');
                const result = document.getElementById('commandResult');
                result.innerHTML = `Error: ${error.message}`;
            }
        }

        function toggleRealTimeMonitoring() {
            realTimeMonitoring = !realTimeMonitoring;
            showNotification(`üìä Monitoreo en tiempo real ${realTimeMonitoring ? 'activado' : 'desactivado'}`, 'info');
            addDebugLog(`Real-time monitoring ${realTimeMonitoring ? 'enabled' : 'disabled'} by owner`, 'info');
            
            if (realTimeMonitoring) {
                const interval = setInterval(() => {
                    if (!realTimeMonitoring) {
                        clearInterval(interval);
                        return;
                    }
                    updateRealTimeMetrics();
                }, 2000);
            }
        }

        async function testEndpoint(endpoint) {
            try {
                showNotification(`Testing ${endpoint}...`, 'info');
                const startTime = performance.now();
                await apiRequest(endpoint);
                const endTime = performance.now();
                showNotification(`‚úÖ ${endpoint} - ${(endTime - startTime).toFixed(2)}ms`, 'success');
            } catch (error) {
                showNotification(`‚ùå ${endpoint} - ${error.message}`, 'error');
            }
        }

        async function testAllEndpoints() {
            const endpoints = [
                '/api/verified-users',
                '/api/user-stats',
                '/api/server-stats',
                '/api/bot-status',
                '/api/recent-activity'
            ];
            
            showNotification('Testing all endpoints...', 'info');
            
            for (const endpoint of endpoints) {
                await testEndpoint(endpoint);
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        function runPerformanceTest() {
            showNotification('Running performance test...', 'info');
            addDebugLog('Performance test started', 'info');
            
            const testStart = performance.now();
            
            // Simular carga de trabajo
            setTimeout(() => {
                const testEnd = performance.now();
                const testDuration = testEnd - testStart;
                
                addDebugLog(`Performance test completed in ${testDuration.toFixed(2)}ms`, 'success');
                showNotification(`Performance test completed: ${testDuration.toFixed(2)}ms`, 'success');
                refreshDebugInfo();
            }, 1000);
        }

        function exportData() {
            const data = {
                timestamp: new Date().toISOString(),
                metrics: performanceMetrics,
                logs: debugLogs,
                userAgent: navigator.userAgent
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `rbxservers-dashboard-export-${Date.now()}.json`;
            a.click();
            
            showNotification('Data exported successfully', 'success');
            addDebugLog('Data exported to JSON file', 'info');
        }

        function clearCache() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                });
            }
            showNotification('Cache cleared', 'success');
            addDebugLog('Browser cache cleared', 'info');
        }

        function downloadReport() {
            showNotification('Generating report...', 'info');
            // Aqu√≠ podr√≠as generar un reporte m√°s detallado
            setTimeout(() => {
                showNotification('Report generated successfully', 'success');
            }, 2000);
        }

        function toggleTheme() {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            // Implementar cambio de tema
            showNotification(`Theme changed to ${currentTheme}`, 'info');
            addDebugLog(`Theme switched to ${currentTheme}`, 'info');
        }

        function refreshAllData() {
            showNotification('Refreshing all data...', 'info');
            loadAllData();
        }

        async function loadAllData() {
            console.log('üîÑ Cargando todos los datos...');
            addDebugLog('Full data refresh started', 'info');
            
            // Actualizar timestamp
            document.getElementById('lastUpdate').textContent = `Actualizado: ${new Date().toLocaleTimeString()}`;
            
            // Cargar todos los datos en paralelo
            await Promise.allSettled([
                loadUserStats(),
                loadServerStats(), 
                loadBotStatus(),
                loadVerifiedUsers(),
                loadRecentActivity()
            ]);
            
            console.log('‚úÖ Datos cargados completamente');
            addDebugLog('Full data refresh completed', 'success');
        }

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            initTabs();
            createParticles();
            loadAllData();
            
            // Actualizaci√≥n autom√°tica cada 30 segundos
            setInterval(loadAllData, 30000);
            
            // Actualizar m√©tricas de rendimiento cada 5 segundos
            setInterval(updatePerformanceMetrics, 5000);
            
            // Actualizar m√©tricas de owner cada 10 segundos si est√° activo
            setInterval(() => {
                const ownerPanel = document.getElementById('ownerDebugPanel');
                if (ownerPanel.classList.contains('active')) {
                    updateOwnerStats();
                }
            }, 10000);
            
            addDebugLog('Dashboard initialized successfully', 'success');
        });

        // Actualizar timestamp cada minuto
        setInterval(() => {
            const now = new Date();
            document.getElementById('lastUpdate').textContent = `Actualizado: ${now.toLocaleTimeString()}`;
        }, 60000);
    </script>
</body>
</html>
